<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yifan Xia | Designer & Strategist</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.js"></script>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background-color: #ffffff; cursor: grab; }
        body:active { cursor: grabbing; }
        canvas { display: block; }
    </style>
</head>
<body>

<script>
/**
 * YIFAN XIA - TACTILE RESUME
 * Refined for clarity, larger particles, and draggable elements.
 */

let particles = [];
let nodes = [];
let trail = [];
const palette = ['#4285F4', '#EA4335', '#FBBC05', '#34A853'];
const phrases = [
  'Parsons BFA', 
  'Central Saint Martins', 
  'Vanderbilt MMark', 
  '3 languages', 
  '47% growth in 20 days', 
  'motion graphics', 
  'brand identity', 
  'maker + strategist'
];

function setup() {
  createCanvas(windowWidth, windowHeight);
  
  // Larger, bold background particles
  for (let i = 0; i < 35; i++) {
    particles.push(new Particle());
  }
  
  // Draggable text nodes
  for (let i = 0; i < phrases.length; i++) {
    nodes.push(new FloatingNode(phrases[i]));
  }
  
  textFont('Helvetica Neue', 'Helvetica', 'Arial', 'sans-serif');
}

function draw() {
  background(255); // Full white background, no transparency

  // 1. Interactive Mouse Trail
  if (mouseX !== 0 && mouseY !== 0) {
    trail.push(new TrailPoint(mouseX, mouseY));
  }
  for (let i = trail.length - 1; i >= 0; i--) {
    trail[i].update();
    trail[i].display();
    if (trail[i].finished()) trail.splice(i, 1);
  }

  // 2. Large Particles (Drifting)
  particles.forEach(p => {
    p.update();
    p.display();
  });
  
  // 3. Draggable Text Nodes
  nodes.forEach(n => {
    n.update();
    n.display();
  });

  // 4. Identity Header
  drawIdentity();
}

function drawIdentity() {
  push();
  textAlign(CENTER, CENTER);
  noStroke();
  fill(30);
  textSize(32);
  textStyle(BOLD);
  text("YIFAN XIA", width / 2, height / 2 - 15);
  
  fill(120);
  textSize(13);
  textStyle(NORMAL);
  text("D E S I G N E R  +  S T R A T E G I S T", width / 2, height / 2 + 20);
  pop();
}

// Interaction Logic
function mousePressed() {
  for (let n of nodes) {
    if (n.isMouseOver()) {
      n.dragging = true;
      n.offsetX = n.pos.x - mouseX;
      n.offsetY = n.pos.y - mouseY;
      break; // Only drag one at a time
    }
  }
}

function mouseReleased() {
  for (let n of nodes) {
    n.dragging = false;
  }
}

class Particle {
  constructor() {
    this.pos = createVector(random(width), random(height));
    this.vel = createVector(random(-0.1, 0.1), random(-0.1, 0.1));
    this.size = random(4, 10); // Increased size as requested
    this.color = color(random(palette));
    this.color.setAlpha(100);
  }

  update() {
    this.pos.add(this.vel);
    if (this.pos.x < 0 || this.pos.x > width) this.vel.x *= -1;
    if (this.pos.y < 0 || this.pos.y > height) this.vel.y *= -1;
  }

  display() {
    noStroke();
    fill(this.color);
    ellipse(this.pos.x, this.pos.y, this.size);
  }
}

class FloatingNode {
  constructor(txt) {
    this.txt = txt;
    this.pos = createVector(random(100, width-100), random(100, height-100));
    this.vel = createVector(random(-0.05, 0.05), random(-0.05, 0.05));
    this.noiseOffset = random(1000);
    this.dragging = false;
    this.offsetX = 0;
    this.offsetY = 0;
    this.w = textWidth(txt) + 40; // Hitbox width
    this.h = 30; // Hitbox height
  }

  isMouseOver() {
    return (mouseX > this.pos.x - this.w/2 && mouseX < this.pos.x + this.w/2 &&
            mouseY > this.pos.y - this.h/2 && mouseY < this.pos.y + this.h/2);
  }

  update() {
    if (this.dragging) {
      this.pos.x = mouseX + this.offsetX;
      this.pos.y = mouseY + this.offsetY;
    } else {
      // Gentle liquid drift
      let n = noise(this.noiseOffset + frameCount * 0.001);
      this.pos.x += map(n, 0, 1, -0.15, 0.15);
      this.pos.add(this.vel);
      
      // Screen wrap
      if (this.pos.x < -150) this.pos.x = width + 150;
      if (this.pos.x > width + 150) this.pos.x = -150;
      if (this.pos.y < -50) this.pos.y = height + 50;
      if (this.pos.y > height + 50) this.pos.y = -50;
    }
  }

  display() {
    push();
    textAlign(CENTER, CENTER);
    if (this.dragging) {
      fill(palette[0]); // Highlight in blue when dragged
    } else if (this.isMouseOver()) {
      fill(0);
    } else {
      fill(100);
    }
    noStroke();
    textSize(16);
    text(this.txt, this.pos.x, this.pos.y);
    pop();
  }
}

class TrailPoint {
  constructor(x, y) {
    this.pos = createVector(x, y);
    this.vel = createVector(random(-0.1, 0.1), random(-0.1, 0.1));
    this.alpha = 180;
    this.color = color(random(palette));
  }

  update() {
    this.pos.add(this.vel);
    this.alpha -= 4;
  }

  finished() { return this.alpha < 0; }

  display() {
    noStroke();
    this.color.setAlpha(this.alpha);
    fill(this.color);
    ellipse(this.pos.x, this.pos.y, 4);
  }
}

function windowResized() {
  resizeCanvas(windowWidth, windowHeight);
}
</script>

</body>
</html>
